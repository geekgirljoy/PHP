<?php

// https://en.wikipedia.org/wiki/Softmax_function
function SoftMax($array){
    $max = max($array); // get the max value
    $sum = 0; // initialize the sum
    // loop through the array 
    foreach($array as $value){
        // add the exponential of the value minus the max value to the sum
        $sum += exp($value - $max);
    }
    // loop through the array again and divide each value by the sum
    return array_map(function($value) use ($sum, $max){
        return exp($value - $max) / $sum;
    }, $array);
}


// Examples:
// Vall the softmax function and print the results
print_r(SoftMax(array(0)));
echo "Test 1" . PHP_EOL;
print_r(SoftMax(array(0,1)));
echo "Test 2" . PHP_EOL;
print_r(SoftMax(array(1,2)));
echo "Test 3" . PHP_EOL;
print_r(SoftMax(array(1, 2, 3)));
echo "Test 4" . PHP_EOL;
print_r(SoftMax(array(1,2,3, 4)));
echo "Test 5" . PHP_EOL;
print_r(SoftMax(array(1,2,3,4, 5)));
echo "Test 6" . PHP_EOL;
print_r(SoftMax(array(1,2,3,4,5, 6)));
echo "Test 7" . PHP_EOL;
print_r(SoftMax(array(1,2,3,4,5,6, 7)));
echo "Test 8" . PHP_EOL;
print_r(SoftMax(array(1,2,3,4,5,6,7, 8)));
echo "Test 9" . PHP_EOL;
print_r(SoftMax(array(1,2,3,4,5,6,7,8, 9)));
echo "Test 10" . PHP_EOL;
print_r(SoftMax(array(1,2,3,4,5,6,7,8,9, 10)));

// SoftMax range 0 - 100
print_r(SoftMax(range(0, 100)));

/*
Array
(
    [0] => 1
)
Test 1
Array
(
    [0] => 0.26894142137
    [1] => 0.73105857863
)
Test 2
Array
(
    [0] => 0.26894142137
    [1] => 0.73105857863
)
Test 3
Array
(
    [0] => 0.09003057317038
    [1] => 0.2447284710548
    [2] => 0.66524095577482
)
Test 4
Array
(
    [0] => 0.032058603280085
    [1] => 0.087144318742033
    [2] => 0.23688281808991
    [3] => 0.64391425988797
)
Test 5
Array
(
    [0] => 0.01165623095604
    [1] => 0.031684920796124
    [2] => 0.086128544436269
    [3] => 0.23412165725274
    [4] => 0.63640864655883
)
Test 6
Array
(
    [0] => 0.0042697785452821
    [1] => 0.011606461431185
    [2] => 0.0315496332011
    [3] => 0.085760794625098
    [4] => 0.23312200962361
    [5] => 0.63369132257372
)
Test 7
Array
(
    [0] => 0.0015683003158865
    [1] => 0.0042630822502408
    [2] => 0.011588259014056
    [3] => 0.031500153901385
    [4] => 0.085626295943797
    [5] => 0.23275640430228
    [6] => 0.63269750427236
)
Test 8
Array
(
    [0] => 0.00057661276968701
    [1] => 0.0015673960138976
    [2] => 0.0042606241025771
    [3] => 0.01158157707593
    [4] => 0.031481990510398
    [5] => 0.085576922728135
    [6] => 0.23262219398733
    [7] => 0.63233268281204
)
Test 9
Array
(
    [0] => 0.00021207899644323
    [1] => 0.00057649048222947
    [2] => 0.001567063602124
    [3] => 0.0042597205136932
    [4] => 0.011579120866686
    [5] => 0.031475313841445
    [6] => 0.085558773660244
    [7] => 0.23257285970588
    [8] => 0.63219857833125
)
Test 10
Array
(
    [0] => 7.8013416127807E-5
    [1] => 0.00021206245143623
    [2] => 0.00057644550823759
    [3] => 0.0015669413501391
    [4] => 0.0042593881983441
    [5] => 0.011578217539912
    [6] => 0.031472858344688
    [7] => 0.085552098928031
    [8] => 0.2325547159026
    [9] => 0.63214925836049
)
Array
(
    [0] => 2.351536504847E-44
    [1] => 6.3921389500836E-44
    [2] => 1.7375635152998E-43
    [3] => 4.7231873294328E-43
    [4] => 1.2838954290005E-42
    [5] => 3.4899896142937E-42
    [6] => 9.4867753500454E-42
    [7] => 2.5787729044702E-41
    [8] => 7.0098315259438E-41
    [9] => 1.9054697657532E-40
    [10] => 5.1796038389251E-40
    [11] => 1.4079622993967E-39
    [12] => 3.8272383336054E-39
    [13] => 1.0403512415422E-38
    [14] => 2.8279678750988E-38
    [15] => 7.6872136863471E-38
    [16] => 2.0896013275079E-37
    [17] => 5.6801253172886E-37
    [18] => 1.5440181433356E-36
    [19] => 4.1970764618402E-36
    [20] => 1.1408836678873E-35
    [21] => 3.1012433428039E-35
    [22] => 8.4300534243733E-35
    [23] => 2.2915261036413E-34
    [24] => 6.2290137669677E-34
    [25] => 1.693221493197E-33
    [26] => 4.6026532165136E-33
    [27] => 1.2511308601147E-32
    [28] => 3.4009262820742E-32
    [29] => 9.2446761124912E-32
    [30] => 2.5129635086574E-31
    [31] => 6.8309430411641E-31
    [32] => 1.8568428340035E-30
    [33] => 5.0474221339762E-30
    [34] => 1.3720315867349E-29
    [35] => 3.7295685302934E-29
    [36] => 1.0138018363889E-28
    [37] => 2.7557991095144E-28
    [38] => 7.4910386422767E-28
    [39] => 2.0362754217585E-27
    [40] => 5.535170476704E-27
    [41] => 1.5046153324247E-26
    [42] => 4.0899685169511E-26
    [43] => 1.1117687098598E-25
    [44] => 3.0221006814612E-25
    [45] => 8.2149213661896E-25
    [46] => 2.2330471471933E-24
    [47] => 6.0700514823079E-24
    [48] => 1.6500110642168E-23
    [49] => 4.485195092617E-23
    [50] => 1.2192024317354E-22
    [51] => 3.3141358153995E-22
    [52] => 9.0087551640459E-22
    [53] => 2.4488335459463E-21
    [54] => 6.6566197288666E-21
    [55] => 1.809456844794E-20
    [56] => 4.9186136605844E-20
    [57] => 1.3370178134777E-19
    [58] => 3.6343912267025E-19
    [59] => 9.8792996290563E-19
    [60] => 2.6854720659566E-18
    [61] => 7.2998699177242E-18
    [62] => 1.9843103747465E-17
    [63] => 5.393914833696E-17
    [64] => 1.4662180676692E-16
    [65] => 3.9855939299034E-16
    [66] => 1.0833967555273E-15
    [67] => 2.9449777135614E-15
    [68] => 8.0052794039908E-15
    [69] => 2.1760605535606E-14
    [70] => 5.9151458603702E-14
    [71] => 1.6079033504929E-13
    [72] => 4.3707344595633E-13
    [73] => 1.1880888058451E-12
    [74] => 3.2295602115242E-12
    [75] => 8.7788548369007E-12
    [76] => 2.3863401577827E-11
    [77] => 6.4867450874228E-11
    [78] => 1.7632801296987E-10
    [79] => 4.793092335043E-10
    [80] => 1.3028975796474E-9
    [81] => 3.5416428150987E-9
    [82] => 9.6271833071754E-9
    [83] => 2.6169397443139E-8
    [84] => 7.1135797531407E-8
    [85] => 1.9336714578257E-7
    [86] => 5.2562639860174E-7
    [87] => 1.4288006878775E-6
    [88] => 3.8838829463472E-6
    [89] => 1.0557488436917E-5
    [90] => 2.8698228972239E-5
    [91] => 7.8009874324195E-5
    [92] => 0.00021205282381583
    [93] => 0.000576419337652
    [94] => 0.0015668702111118
    [95] => 0.0042591948224191
    [96] => 0.011577691889649
    [97] => 0.03147142947913
    [98] => 0.085548214868749
    [99] => 0.23254415793483
    [100] => 0.63212055882856
)
*/
